{
  "comment": "全量表复制 + 自定义表混合配置示例",
  "sources": {
    "mysql_src": {
      "driver": "mysql",
      "dsn": "root:password@tcp(10.80.30.9:3306)/testdb?charset=utf8mb4&parseTime=True&loc=Local"
    },
    "postgres_dst": {
      "driver": "postgres",
      "dsn": "postgres://test:password@10.80.30.9:5432/testdb?sslmode=disable"
    }
  },
  "sync": {
    "source": "mysql_src",
    "target": "postgres_dst"
  },
  "table_list": {
    "from_source": true,
    "comment": "从源库自动获取所有表，但部分表使用自定义配置",
    "schema": "",
    "include": [],
    "exclude": ["^tmp_", "^temp_"],
    "comment": "排除以 tmp_ 和 temp_ 开头的表",
    "defaults": {
      "comment": "大部分表使用的默认配置",
      "batch_size": 10000,
      "auto_create": true
    },
    "list": [
      {
        "comment": "自定义表1：使用自定义 SELECT 查询（会覆盖默认配置）",
        "source_table": "users",
        "target_table": "users_import",
        "select_sql": "SELECT id, username, email, created_at FROM users WHERE status = 'active' ORDER BY id",
        "batch_size": 5000,
        "auto_create": true
      },
      {
        "comment": "自定义表2：使用字段映射 + WHERE 条件（会覆盖默认配置）",
        "source_table": "orders",
        "target_table": "orders_import",
        "where": "status = 'completed' AND amount > 100",
        "batch_size": 1000,
        "auto_create": true,
        "columns": [
          { "source": "id", "target": "order_id" },
          { "source": "user_id", "target": "customer_id" },
          { "source": "amount", "target": "total_amount", "target_type": "DECIMAL(10,2)" },
          { "source": "status", "target": "order_status", "target_type": "VARCHAR(50)" },
          { "source": "created_at", "target": "order_date", "target_type": "TIMESTAMP" }
        ]
      },
      {
        "comment": "自定义表3：使用增量同步（会覆盖默认配置）",
        "source_table": "products",
        "target_table": "products_sync",
        "incremental_key": "updated_at",
        "since": "2024-01-01 00:00:00",
        "until": "2024-12-31 23:59:59",
        "batch_size": 2000,
        "auto_create": true,
        "columns": [
          { "source": "id", "target": "product_id" },
          { "source": "name", "target": "product_name", "target_type": "VARCHAR(255)" },
          { "source": "price", "target": "price", "target_type": "DECIMAL(10,2)" },
          { "source": "stock", "target": "stock_quantity", "target_type": "INT" },
          { "source": "updated_at", "target": "last_updated", "target_type": "TIMESTAMP" }
        ]
      },
      {
        "comment": "自定义表4：使用自定义 SELECT 查询（复杂 JOIN）",
        "source_table": "orders",
        "target_table": "order_summary",
        "select_sql": "SELECT o.id, u.username, o.amount, o.status, o.created_at FROM orders o LEFT JOIN users u ON o.user_id = u.id WHERE o.created_at >= '2024-01-01'",
        "batch_size": 3000,
        "auto_create": true
      },
      {
        "comment": "自定义表5：使用自定义 SELECT 查询（聚合统计）",
        "source_table": "orders",
        "target_table": "daily_stats",
        "select_sql": "SELECT DATE(created_at) as stat_date, COUNT(*) as order_count, SUM(amount) as total_amount FROM orders WHERE created_at >= '2024-01-01' GROUP BY DATE(created_at) ORDER BY stat_date",
        "batch_size": 1000,
        "auto_create": true
      }
    ]
  }
}
